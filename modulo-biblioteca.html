<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca BlueSphere</title>
    <style>
        /* ESTILOS GHIBLI DARK */
        :root {
            --bg-dark: #041016; --card-bg: #07212a;
            --accent-blue: #4fc3f7; --accent-green: #3ddc84; --accent-gold: #ffd700;
            --text-white: #ffffff; --text-light: #cfefff;
        }
        body { background: var(--bg-dark); color: var(--text-white); font-family: sans-serif; padding: 20px; }
        
        .container { max-width: 1000px; margin: 0 auto; background: rgba(7, 33, 42, 0.9); padding: 30px; border-radius: 15px; border: 1px solid rgba(79, 195, 247, 0.2); }
        
        h1 { text-align: center; color: var(--accent-blue); }
        .subtitulo { text-align: center; color: var(--text-light); margin-bottom: 30px; }

        /* ACCESO */
        .acceso-box { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; border: 1px solid var(--accent-blue); text-align: center; }
        input { padding: 10px; width: 60%; border-radius: 5px; border: 1px solid var(--accent-blue); background: #021219; color: white; }
        button { padding: 10px 20px; background: var(--accent-gold); border: none; border-radius: 5px; font-weight: bold; cursor: pointer; color: #000; }
        
        /* GRID LIBROS */
        .libros-grid { display: none; margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .libro-card { background: var(--card-bg); padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); transition: transform 0.3s; }
        .libro-card:hover { transform: translateY(-5px); border-color: var(--accent-blue); }
        
        .btn-download { width: 100%; padding: 10px; background: var(--accent-green); color: #000; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1> Biblioteca BlueSphere</h1>
    <p class="subtitulo">Conocimiento exclusivo para Guardianes</p>

    <div class="acceso-box" id="boxValidacion">
        <p>Ingresa tu c贸digo de acceso:</p>
        <input type="text" id="inputCodigo" placeholder="Ej: GPR-AQUA-0021">
        <button onclick="validar()">Desbloquear</button>
        <p id="msgError" style="color: #ff7b7b; display: none; margin-top: 10px;">C贸digo no v谩lido.</p>
    </div>

    <div id="gridLibros" class="hidden">
        <h3 style="color:var(--accent-green); text-align:center;"> Acceso Concedido</h3>
        
        <div class="libros-grid" style="display: grid;">
            <div class="libro-card">
                <h4> 500 A帽os Despu茅s</h4>
                <p style="font-size:0.9rem; color:#ccc">La carta que el pl谩stico escribi贸.</p>
                <button class="btn-download" onclick="alert('Descargando PDF...')"> Descargar</button>
            </div>
            
            <div class="libro-card">
                <h4> Saga I: El Pacto Azul</h4>
                <p style="font-size:0.9rem; color:#ccc">El inicio de la transformaci贸n.</p>
                <button class="btn-download" onclick="alert('Descargando PDF...')"> Descargar</button>
            </div>

            <div class="libro-card">
                <h4> Saga II: El Vuelo</h4>
                <p style="font-size:0.9rem; color:#ccc">Principios de conciencia.</p>
                <button class="btn-download" onclick="alert('Descargando PDF...')"> Descargar</button>
            </div>
        </div>
    </div>
</div>

<script>
    // --- LGICA INTELIGENTE ---
    
    // 1. Al cargar, revisar si el Portal nos mand贸 el c贸digo
    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        const codigoURL = params.get('codigo');

        if(codigoURL) {
            document.getElementById('inputCodigo').value = codigoURL;
            // Validar autom谩ticamente despu茅s de medio segundo
            setTimeout(validar, 500);
        }
    };

    // 2. Funci贸n de Validaci贸n
    function validar() {
        const codigo = document.getElementById('inputCodigo').value.trim().toUpperCase();
        const box = document.getElementById('boxValidacion');
        const grid = document.getElementById('gridLibros');
        const error = document.getElementById('msgError');

        // Aceptamos c贸digos que empiecen con BS (viejos) o GPR (nuevos)
        // Y que tengan al menos 5 caracteres
        if ((codigo.startsWith('BS') || codigo.startsWith('GPR')) && codigo.length > 5) {
            error.style.display = 'none';
            box.style.display = 'none'; // Ocultar caja de entrada
            grid.classList.remove('hidden'); // Mostrar libros
        } else {
            error.style.display = 'block';
        }
    }
</script>

</body>
</html>
